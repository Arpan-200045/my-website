<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hey Partner ğŸ˜‰</title>

  <style>
    :root{
      --pink1:#ffe6f1;
      --pink2:#ffd1e6;
      --ink:#3b2a33;
      --muted:#6d5561;
      --paper:#fff7fb;
      --paper2:#fff0f8;
      --shadow: 0 25px 70px rgba(30,10,20,.20);
      --stroke: rgba(80,30,50,.14);
      --radius: 22px;


    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--ink);
      background:
        radial-gradient(1200px 900px at 15% 15%, rgba(255,184,216,.75), transparent 55%),
        radial-gradient(900px 700px at 85% 25%, rgba(255,230,241,.9), transparent 55%),
        radial-gradient(900px 700px at 50% 95%, rgba(255,209,230,.85), transparent 55%),
        linear-gradient(180deg, var(--pink1), var(--pink2));
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding-bottom: env(safe-area-inset-bottom);
      overflow-x:hidden;
    }

    .floaties{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.30;
      filter: blur(.2px);
    }
    .floaties span{
      position:absolute;
      font-size: clamp(18px, 2.2vw, 34px);
      animation: drift linear infinite;
      transform: translateY(110vh);
    }
    @keyframes drift{
      0%{ transform: translateY(110vh) translateX(0) rotate(0deg); opacity:0;}
      10%{ opacity:1;}
      100%{ transform: translateY(-20vh) translateX(70px) rotate(18deg); opacity:0;}
    }

    .stage{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }

    .bookShell{
      width: min(980px, 100%);
      height: min(680px, 90svh);
      position:relative;
      filter: drop-shadow(var(--shadow));
    }

    .book{
      width:100%;
      height:100%;
      position:relative;
      border-radius: calc(var(--radius) + 10px);
      background:
        radial-gradient(900px 520px at 30% 20%, rgba(255,255,255,.55), transparent 55%),
        linear-gradient(180deg, rgba(255,184,216,.55), rgba(255,209,230,.45));
      border:1px solid rgba(120,50,80,.22);
      overflow:hidden;
      isolation:isolate;
    }

    .book:before{
      content:"";
      position:absolute;
      inset:-10px -12px -12px -12px;
      border-radius: calc(var(--radius) + 18px);
      background:
        linear-gradient(90deg,
          rgba(120,50,80,.08),
          rgba(255,255,255,.22) 10%,
          rgba(255,255,255,.10) 50%,
          rgba(120,50,80,.06) 90%,
          rgba(120,50,80,.10)
        );
      z-index:-2;
      filter: blur(.2px);
    }
    .book:after{
      content:"";
      position:absolute;
      inset:-18px -18px -20px -18px;
      border-radius: calc(var(--radius) + 26px);
      background: rgba(255,255,255,.18);
      z-index:-3;
      filter: blur(10px);
      opacity:.55;
    }

    .page{
      position:absolute;
      inset: 14px;
      border-radius: var(--radius);
      transform: translateX(110%);
      opacity: 0;
      pointer-events: none;
      transition: transform 380ms ease, opacity 260ms ease;
    }
    .page.active{
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }
    .page.exit-left{
      transform: translateX(-110%);
      opacity: 0;
    }

    .face{
      position:absolute;
      inset:0;
      border-radius: var(--radius);
      background-color: #fff7fb;
      background: linear-gradient(180deg, var(--paper), var(--paper2));
      border:1px solid var(--stroke);
      overflow:hidden;
      cursor: default;
      touch-action: manipulation;
    }

    .pageCurl{
      position:absolute;
      right: 14px;
      bottom: 14px;
      width: 78px;
      height: 78px;
      pointer-events:none;
      opacity:.92;
      z-index: 50;
    }
    .pageCurl:before{
      content:"";
      position:absolute;
      right:0; bottom:0;
      width:100%; height:100%;
      background:
        linear-gradient(135deg,
          rgba(255,255,255,0) 47%,
          rgba(150,60,100,.10) 50%,
          rgba(255,255,255,.75) 58%,
          rgba(255,184,216,.26) 72%,
          rgba(120,50,80,.14) 100%
        );
      clip-path: polygon(100% 0, 0 100%, 100% 100%);
      border-bottom-right-radius: 18px;
      filter: drop-shadow(0 10px 18px rgba(30,10,20,.12));
    }

    .paperTexture{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 600px at 30% 30%, rgba(255,255,255,.28), transparent 60%),
        repeating-linear-gradient(0deg, rgba(120,50,80,.020), rgba(120,50,80,.020) 1px, rgba(255,255,255,0) 3px, rgba(255,255,255,0) 7px);
      opacity:.28;
      pointer-events:none;
    }

    .pad{
      padding: 22px;
      height:100%;
      display:flex;
      flex-direction:column;
      gap:14px;
      position:relative;
    }
    .topRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .badge{
      font-size:12px;
      padding:7px 10px;
      border-radius: 999px;
      border:1px solid rgba(120,50,80,.18);
      background: rgba(255,255,255,.82);
      color: var(--muted);
      user-select:none;
      white-space:nowrap;
    }
    .h1{
      font-size: clamp(26px, 3.2vw, 42px);
      line-height:1.1;
      letter-spacing:-0.02em;
      margin:0;
    }
    .p{
      margin:0;
      color: var(--muted);
      font-size: 15.5px;
      line-height:1.55;
    }
    .card{
      margin-top:auto;
      border-radius: 18px;
      border:1px solid rgba(120,50,80,.14);
      background: rgba(255,255,255,.74);
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btn{
      appearance:none;
      border:0;
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 950;
      cursor:pointer;
      background: linear-gradient(180deg, #ff7fb6, #ff5aa4);
      color:#fff;
      box-shadow: 0 10px 24px rgba(255,90,164,.20);
      transition: transform .08s ease, filter .2s ease;
      user-select:none;
      letter-spacing: .2px;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }
    .btn.secondary{
      background: rgba(255,255,255,.90);
      color: var(--ink);
      border:1px solid rgba(120,50,80,.18);
      box-shadow:none;
    }
    .btn.ghost{
      background: rgba(255,255,255,.62);
      color: var(--ink);
      border:1px solid rgba(120,50,80,.14);
      box-shadow:none;
    }
    .btn.tinyNo{
      padding: 6px 9px;
      font-size: 11px;
      border-radius: 999px;
      font-weight: 950;
      background: rgba(120,50,80,.10);
      color: rgba(70,30,50,.80);
      border: 1px solid rgba(120,50,80,.18);
      box-shadow:none;
    }
    .btn.bigGo{
      padding: 14px 18px;
      border-radius: 18px;
      font-size: 16px;
    }

    input[type="time"], input[type="text"]{
      width:100%;
      border-radius: 14px;
      border:1px solid rgba(120,50,80,.18);
      background: rgba(255,255,255,.90);
      padding: 13px 12px;
      outline:none;
      font-size: 15px;
      color: var(--ink);
    }
    label{
      font-size: 12.5px;
      color: var(--muted);
      font-weight: 950;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 720px){
      .grid2{ grid-template-columns: 1fr; }
    }

    @media (max-width: 520px){
      .stage{ padding: 12px; align-items:flex-start; }
      .bookShell{ height: min(760px, 92svh); }
      .page{ inset: 10px; }
      .pad{ padding: 16px; gap: 12px; }
      .btn{ font-size: 15px; }
    }

    .cover{
      background:
        radial-gradient(900px 520px at 20% 10%, rgba(255,255,255,.70), transparent 60%),
        radial-gradient(900px 600px at 80% 65%, rgba(255,90,164,.14), transparent 60%),
        linear-gradient(180deg, rgba(255,230,241,.92), rgba(255,184,216,.82));
    }

    .embossWrap{
      margin-top: 6px;
      padding: 16px 16px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.28);
      background: rgba(255,255,255,.22);
      backdrop-filter: blur(10px);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.38),
        inset 0 -1px 0 rgba(120,50,80,.10),
        0 18px 40px rgba(30,10,20,.14);
    }
    .embossTitle{
      margin:0;
      font-size: clamp(26px, 3.2vw, 42px);
      letter-spacing:-0.02em;
      line-height:1.08;
      color: rgba(55,20,35,.92);
      text-shadow:
        0 1px 0 rgba(255,255,255,.70),
        0 -1px 0 rgba(120,50,80,.12),
        0 10px 30px rgba(30,10,20,.18);
    }

    .coverLine{
      margin-top: 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.28);
      background: rgba(255,255,255,.22);
      backdrop-filter: blur(10px);
      padding: 12px 14px;
      color: rgba(65,30,45,.92);
      font-weight: 850;
      line-height: 1.45;
    }

    .strip{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; align-items:stretch; }
    .polaroid{
      width: 150px; height: 110px;
      border-radius: 16px;
      background:
        radial-gradient(140px 100px at 30% 30%, rgba(255,255,255,.92), transparent 55%),
        linear-gradient(180deg, rgba(255,184,216,.68), rgba(255,209,230,.42));
      border: 1px solid rgba(120,50,80,.18);
      position:relative; overflow:hidden;
      box-shadow: 0 14px 30px rgba(30,10,20,.10);
    }
    .polaroid .icon{
      position:absolute; left:14px; top:14px;
      font-size: 30px;
      z-index:1;
      filter: drop-shadow(0 8px 10px rgba(30,10,20,.10));
    }
    .polaroid .label{
      position:absolute; left:14px; bottom:12px;
      font-size: 16px;
      font-weight: 950;
      color: rgba(70,30,50,.82);
      z-index:1;
      letter-spacing: .2px;
    }

    .page2Art{
  background-color: #fff6fb;
  background-image:
    radial-gradient(900px 600px at 20% 10%, rgba(255,255,255,.92), transparent 55%),
    radial-gradient(900px 700px at 80% 60%, rgba(255,90,164,.12), transparent 60%);
}
    }
    .glass{
      border-radius: 18px;
      border:1px solid rgba(120,50,80,.16);
      background: rgba(255,255,255,.82);
      padding: 14px;
      backdrop-filter: blur(10px);
    }

    .choicePills{ display:flex; gap:10px; flex-wrap:wrap; }
    .pill{
      padding: 9px 11px;
      border-radius: 999px;
      border:1px solid rgba(120,50,80,.16);
      background: rgba(255,255,255,.82);
      font-size: 13px;
      color: rgba(70,30,50,.86);
      font-weight: 950;
      cursor:pointer;
      user-select:none;
    }
    .pill.selected{
      background: linear-gradient(180deg, rgba(255,127,182,.90), rgba(255,90,164,.88));
      color:#fff;
      border-color: rgba(255,90,164,.35);
    }

    .noteBox{
      border-radius: 18px;
      border: 1px dashed rgba(120,50,80,.22);
      background: rgba(255,255,255,.78);
      padding: 12px;
      line-height:1.6;
      color: rgba(65,30,45,.92);
    }
    .page[data-i="6"] .noteBox{
      flex: 1;
      overflow-y: auto;
      min-height: 0;
      -webkit-overflow-scrolling: touch;
    }

    .selfieZone{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-items:start;
    }
    @media (max-width:720px){ .selfieZone{grid-template-columns:1fr;} }

    .preview{
      width:100%;
      aspect-ratio: 4/3;
      border-radius: 18px;
      border: 1px solid rgba(120,50,80,.18);
      background:
        radial-gradient(500px 260px at 30% 25%, rgba(255,255,255,.92), transparent 55%),
        linear-gradient(180deg, rgba(255,184,216,.30), rgba(255,209,230,.22));
      display:flex;
      align-items:center;
      justify-content:center;
      color: rgba(70,30,50,.65);
      font-weight: 950;
      overflow:hidden;
    }
    .preview img{ width:100%; height:100%; object-fit:cover; display:block; }

    .footerNav{
      margin-top:auto;
      display:grid;
      grid-template-columns: auto 1fr auto;
      align-items:center;
      gap:12px;
      padding-top: 10px;
    }
    .footerNav .leftNav{ justify-self:start; }
    .footerNav .midNav{ justify-self:center; text-align:center; }
    .footerNav .rightNav{ justify-self:end; }

    .progress{
      font-size: 12.5px;
      color: rgba(70,30,50,.72);
      font-weight: 950;
      user-select:none;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(120,50,80,.18);
      color: rgba(70,30,50,.92);
      padding: 10px 12px;
      border-radius: 999px;
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 30px rgba(30,10,20,.12);
      z-index: 999;
    }
    .toast.show{ opacity: 1; transform: translateX(-50%) translateY(-2px); }

    #satBtn{
      font-size: 18px;
      padding: 14px 16px;
      border-radius: 18px;
    }
    #satBtn::before{
      content:"âœ¨ ";
      font-size: 22px;
      line-height: 1;
    }

    .finalOverlay{
      position:absolute;
      inset:0;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(255,255,255,.9), transparent 55%),
        linear-gradient(180deg, rgba(255,230,241,.85), rgba(255,184,216,.82));
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
      opacity:0;
      pointer-events:none;
      transition: opacity .35s ease;
      z-index: 300;
    }
    .finalOverlay.show{
      opacity:1;
      pointer-events:auto;
    }
    .finalCard{
      width:min(520px, 100%);
      border-radius: 22px;
      border:1px solid rgba(120,50,80,.16);
      background: rgba(255,255,255,.86);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 50px rgba(30,10,20,.16);
      padding: 18px;
      text-align:center;
    }
    .finalCard h2{
      margin: 0 0 8px 0;
      font-size: clamp(22px, 5.6vw, 34px);
    }
    .finalCard p{
      margin: 0;
      color: rgba(70,30,50,.75);
      font-weight: 800;
      line-height: 1.5;
    }
  </style>
</head>

<body>
  <div class="floaties" aria-hidden="true" id="floaties"></div>

  <div class="stage">
    <div class="bookShell">
      <div class="book" id="book">

        <!-- PAGE 1 -->
        <div class="page active" data-i="1">
          <div class="face cover" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Hardcover edition ğŸ“–</div>
                <div class="badge">Tap to go next</div>
              </div>

              <div class="embossWrap">
                <h1 class="embossTitle">Hey Partner, wanna give this a chance ğŸ˜‰</h1>
              </div>

              <div class="coverLine">
                I made a little â€œbookâ€ for you. Tap anywhere to move forward. Back is only via the bottom-left button. ğŸ’•
              </div>

              <div class="strip" aria-hidden="true">
                <div class="polaroid"><div class="icon">ğŸ›¶</div><div class="label">canals</div></div>
                <div class="polaroid"><div class="icon">â˜•</div><div class="label">coffee</div></div>
                <div class="polaroid"><div class="icon">ğŸ¹</div><div class="label">mocktails</div></div>
                <div class="polaroid"><div class="icon">ğŸŒ¸</div><div class="label">lilies</div></div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back disabled style="opacity:.55; cursor:not-allowed;" type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress" id="progress">Cover</div>
                </div>
                <div class="rightNav">
                  <button class="btn secondary" id="startBtn" type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 2 -->
        <div class="page" data-i="2">
          <div class="face page2Art" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 2 / 8 ğŸ’—</div>
                <div class="badge">Tiny â€œNoâ€ button</div>
              </div>

              <div class="glass">
                <h2 class="h1" style="margin:0 0 10px 0;">Wanna hang out?? ğŸ¥º</h2>
                <p class="p">
                  No pressure. Just a sweet Delft moment: canals, coffee, maybe a mocktailâ€¦
                  and your favorite lily energy ğŸŒ¸
                </p>

                <div class="row" style="margin-top:14px;">
                  <button class="btn" id="yesHang" type="button">Yes ğŸ’š</button>
                  <button class="btn tinyNo" id="noHang" type="button">no</button>
                </div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">Page 2 / 8</div>
                </div>
                <div class="rightNav">
                  <button class="btn" data-next type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 3 -->
        <div class="page" data-i="3">
          <div class="face" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 3 / 8 ğŸ“…</div>
                <div class="badge">Day</div>
              </div>

              <h2 class="h1" style="font-size:clamp(24px,2.7vw,34px); margin-top:6px;">Sunday or Saturday?</h2>
              <p class="p">Choose one and weâ€™re locked in ğŸ’—</p>

              <div class="card">
                <div class="row">
                  <button class="btn secondary" id="satBtn" type="button">Saturday</button>
                  <button class="btn secondary" id="sunBtn" type="button">Sunday ğŸŒ¸</button>
                  <div class="badge" id="dayPicked">No day picked yet</div>
                </div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">Page 3 / 8</div>
                </div>
                <div class="rightNav">
                  <button class="btn" data-next type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 4 -->
        <div class="page" data-i="4">
          <div class="face" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 4 / 8 â°</div>
                <div class="badge">Time</div>
              </div>

              <h2 class="h1" style="font-size:clamp(24px,2.7vw,34px); margin-top:6px;">What time works for you?</h2>
              <p class="p">Type it in â€” Iâ€™ll adapt ğŸ™‚</p>

              <div class="card">
                <div class="grid2">
                  <div>
                    <label for="time">Choose a time</label>
                    <input id="time" type="time" />
                  </div>
                  <div>
                    <label for="extraNote">Any note? (optional)</label>
                    <input id="extraNote" type="text" placeholder="e.g., after dinner / before sunset..." />
                  </div>
                </div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">Page 4 / 8</div>
                </div>
                <div class="rightNav">
                  <button class="btn" data-next type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 5 -->
        <div class="page" data-i="5">
          <div class="face" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 5 / 8 ğŸ½ï¸</div>
                <div class="badge">Food</div>
              </div>

              <h2 class="h1" style="font-size:clamp(24px,2.7vw,34px); margin-top:6px;">Food mood?</h2>
              <p class="p">Pick one (or â€œAnythingâ€ if you trust me ğŸ˜‡)</p>

              <div class="card">
                <div class="choicePills" id="foodPills">
                  <div class="pill" data-food="Italian">ğŸ Italian</div>
                  <div class="pill" data-food="Asian">ğŸœ Asian</div>
                  <div class="pill" data-food="Middle Eastern">ğŸ¥™ Middle Eastern</div>
                  <div class="pill" data-food="Anything">âœ¨ Anything</div>
                </div>

                <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                  <div class="badge">Your choice:</div>
                  <div id="foodChoice" style="font-weight:950;">â€”</div>
                </div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">Page 5 / 8</div>
                </div>
                <div class="rightNav">
                  <button class="btn" data-next type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 6 -->
        <div class="page" data-i="6">
          <div class="face" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 6 / 8 ğŸ“</div>
                <div class="badge">Polish note</div>
              </div>

              <h2 class="h1" style="font-size:clamp(24px,2.7vw,34px); margin-top:6px;">A little note for you ğŸ’Œ</h2>
              <p class="p">Cheesy mode: ON.</p>

              <div class="noteBox" id="polishNote"></div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">Page 6 / 8</div>
                </div>
                <div class="rightNav">
                  <button class="btn" data-next type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 7 -->
        <div class="page" data-i="7">
          <div class="face" data-tap-next>
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 7 / 8 ğŸ“¸</div>
                <div class="badge">Selfie mandatory</div>
              </div>

              <h2 class="h1" style="font-size:clamp(24px,2.7vw,34px); margin-top:6px;">Since I canâ€™t see your live reactionâ€¦</h2>
              <p class="p">â€¦you have to add a <b>mandatory selfie</b> ğŸ˜‡ğŸ’—</p>

              <div class="selfieZone">
                <div class="glass">
                  <label>Open camera (required)</label>

                  <input id="selfie" type="file" accept="image/*" capture="user" style="display:none;" />

                  <div class="row" style="margin-top:10px;">
                    <button class="btn" id="openCameraBtn" type="button">Open Camera ğŸ“¸</button>
                    <button class="btn secondary" id="openGalleryBtn" type="button">Or choose from gallery ğŸ–¼ï¸</button>
                  </div>

                  <p class="p" style="font-size:13px; margin-top:10px;">
                    Bonus points if thereâ€™s a lily ğŸŒ¸ or a mocktail ğŸ¹
                  </p>
                </div>

                <div class="preview" id="preview">SELFIE PREVIEW âœ¨</div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">Page 7 / 8</div>
                </div>
                <div class="rightNav">
                  <button class="btn" data-next type="button">Next â†’</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE 8 -->
        <div class="page" data-i="8">
          <div class="face">
            <div class="paperTexture" aria-hidden="true"></div>
            <div class="pad">
              <div class="pageCurl" aria-hidden="true"></div>

              <div class="topRow">
                <div class="badge">Page 8 / 8 ğŸ’—</div>
                <div class="badge">Final page</div>
              </div>

              <h2 class="h1" style="font-size:clamp(24px,2.7vw,34px); margin-top:6px;">
                See you on <span id="finalDay">that day</span> â¤ï¸
              </h2>
              <p class="p">Okayâ€¦ this is officially cute now ğŸ˜Œ</p>

              <div class="card">
                <div style="display:flex; flex-direction:column; gap:8px;">
                  <div class="badge">Summary</div>
                  <div id="summary" class="p" style="color:rgba(65,30,45,.92); font-weight:950; white-space:pre-wrap;"></div>
                </div>

                <div class="row" style="justify-content:flex-end;">
                  <button class="btn secondary" id="copySummary" type="button">Copy summary ğŸ“‹</button>
                </div>

                <div class="p" style="font-size:13px;">
                  Tip: You can paste this straight into Notes or Sheets.
                </div>
              </div>

              <div class="finalOverlay" id="finalOverlay">
                <div class="finalCard">
                  <h2>Okayâ€¦ itâ€™s a date ğŸ’—</h2>
                  <p id="finalCuteLine">See you then ğŸ˜ŒğŸŒ¸</p>
                </div>
              </div>

              <div class="footerNav">
                <div class="leftNav">
                  <button class="btn ghost" data-back type="button">â† Back</button>
                </div>
                <div class="midNav">
                  <div class="progress">The end (for now) ğŸ’</div>
                </div>
                <div class="rightNav">
                  <button class="btn bigGo" id="letsGo" type="button">LETS GOOO ğŸš€ğŸ’—</button>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="toast" id="toast">Saved!</div>

  <script>
    const FROM_NAME = "Arpan";

    // âœ… Your Web App URL (filled by you)
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwOMYPPplfJdg-xK1TzUHI9o1KDA-_2QNJp1XxjwHaABGkTeZuqBXZT0ZU33WkelqFD/exec";

    const pages = Array.from(document.querySelectorAll(".page"))
      .sort((a,b)=> Number(a.dataset.i) - Number(b.dataset.i));

    let current = 1;

    const toast = document.getElementById("toast");
    const progress = document.getElementById("progress");

    let hangoutYes = null;
    let day = "";
    let time = "";
    let extraNote = "";
    let food = "";

    let selfieFile = null;
    let selfieDataUrl = "";
    let selfieName = "";

    const dayPicked = document.getElementById("dayPicked");
    const finalDay = document.getElementById("finalDay");
    const summary = document.getElementById("summary");
    const polishNote = document.getElementById("polishNote");

    const foodPills = document.getElementById("foodPills");
    const foodChoice = document.getElementById("foodChoice");

    const selfie = document.getElementById("selfie");
    const preview = document.getElementById("preview");

    function showToast(text){
      toast.textContent = text;
      toast.classList.add("show");
      setTimeout(()=> toast.classList.remove("show"), 1100);
    }

    function updateProgress(){
      if(!progress) return;
      progress.textContent = (current === 1) ? "Cover" : ("Page " + current + " / 8");
    }

    function buildSummaryText(){
      const hang = (hangoutYes === true) ? "Yes âœ…" : (hangoutYes === false ? "No ğŸ¥²" : "â€”");
      const selfieStatus = selfieDataUrl ? "Captured âœ…" : "Missing âŒ";
      return "Answer: " + hang +
        "\nDay: " + (day || "â€”") +
        "\nTime: " + (time || "â€”") +
        "\nFood: " + (food || "â€”") +
        "\nNote: " + (extraNote || "â€”") +
        "\nSelfie: " + selfieStatus +
        "\nFrom: " + FROM_NAME;
    }

    function updateDynamicText(){
      const dayPart = day ? ("Widzimy siÄ™ w " + (day === "Saturday" ? "sobotÄ™" : "niedzielÄ™") + " ğŸ’—") : "Widzimy siÄ™ juÅ¼ wkrÃ³tce ğŸ’—";
      const timePart = time ? ("O " + time + " bÄ™dÄ™ juÅ¼ w trybie: â€wow, to siÄ™ naprawdÄ™ dziejeâ€ ğŸ˜Œ") : "Ustalmy jeszcze godzinÄ™, a ja dopasujÄ™ wszystko do Ciebie ğŸ˜‡";
      const foodPart = food ? ("Jedzenie: " + food + ". (To jest oficjalnie najlepszy wybÃ³r.)") : "Jedzenie: Ty wybierasz â€” ja tylko wnoszÄ™ uÅ›miech.";

      if(polishNote){
        polishNote.innerHTML =
          "<b>Hej,</b><br/>" +
          "Po pierwsze: chciaÅ‚bym Ci podziÄ™kowaÄ‡ za to, Å¼e zgodziÅ‚aÅ› siÄ™ na koncert Bad Bunnyâ€™ego â€” serio, to brzmi jak idealna historia do opowiadania pÃ³Åºniej ğŸ¥¹ğŸ¶<br/><br/>" +
          "Po drugie: dziÄ™kujÄ™, Å¼e zgodziÅ‚aÅ› siÄ™ wyjÅ›Ä‡ ze mnÄ… dzisiaj. To dla mnie naprawdÄ™ duÅ¼o znaczy.<br/><br/>" +
          "ObiecujÄ™: bÄ™dÄ™ dÅ¼entelmenem, zrobiÄ™ miejsce na Twoje ulubione lilie ğŸŒ¸ i nie bÄ™dÄ™ udawaÅ‚, Å¼e znam wszystkie kanaÅ‚y w Delft (chociaÅ¼ bÄ™dÄ™ prÃ³bowaÅ‚) ğŸ›¶<br/><br/>" +
          "<b>" + dayPart + "</b><br/>" +
          timePart + "<br/>" +
          foodPart + "<br/><br/>" +
          "â€” <b>" + FROM_NAME + "</b> â¤ï¸";
      }

      if(finalDay) finalDay.textContent = day ? day : "the day you choose";
      if(summary) summary.textContent = buildSummaryText();
    }

    function validateBeforeNext(){
      if(current === 2 && hangoutYes !== true){ showToast("Say yes first ğŸ˜‡"); return false; }
      if(current === 3 && !day){ showToast("Pick Saturday or Sunday ğŸ’—"); return false; }
      if(current === 4 && !document.getElementById("time").value){ showToast("Please choose a time â°"); return false; }
      if(current === 5 && !food){ showToast("Pick a food option ğŸ½ï¸"); return false; }
      if(current === 7 && !selfieDataUrl){ showToast("Selfie is mandatory ğŸ“¸"); return false; }
      return true;
    }

    function setPage(n){
      if(n < 1 || n > 8) return;

      const currentPage = pages[current - 1];
      const nextPage = pages[n - 1];

      if(currentPage){
        currentPage.classList.remove("active");
        currentPage.classList.add("exit-left");
      }

      nextPage.classList.remove("exit-left");
      nextPage.classList.add("active");

      current = n;
      updateProgress();
      updateDynamicText();
    }

    function goNext(){
      if(current >= 8) return;
      if(!validateBeforeNext()) return;

      if(current === 4){
        time = document.getElementById("time").value;
        extraNote = document.getElementById("extraNote").value.trim();
      }

      setPage(current + 1);
    }

    document.querySelectorAll("[data-next]").forEach(btn=>{
      btn.addEventListener("click", (e)=>{
        e.stopPropagation();
        goNext();
      });
    });

    document.querySelectorAll("[data-back]").forEach(btn=>{
      btn.addEventListener("click", (e)=>{
        e.stopPropagation();
        setPage(Math.max(1, current - 1));
      });
    });

    const startBtn = document.getElementById("startBtn");
    if(startBtn){
      startBtn.addEventListener("click", (e)=>{
        e.stopPropagation();
        setPage(2);
      });
    }

    const blockTapTags = new Set(["BUTTON","A","INPUT","SELECT","TEXTAREA","LABEL"]);
    function isBlockedTarget(el){
      if(!el) return false;
      if(blockTapTags.has(el.tagName)) return true;
      if(el.closest("button, a, input, select, textarea, label, .pill")) return true;
      return false;
    }

    document.querySelectorAll("[data-tap-next]").forEach(face=>{
      face.addEventListener("click", (e)=>{
        if(isBlockedTarget(e.target)) return;
        goNext();
      });
    });

    const yesHang = document.getElementById("yesHang");
    const noHang = document.getElementById("noHang");
    if(yesHang){
      yesHang.addEventListener("click", (e)=>{
        e.stopPropagation();
        hangoutYes = true;
        showToast("Yay ğŸ’š");
        setPage(3);
      });
    }
    if(noHang){
      noHang.addEventListener("click", (e)=>{
        e.stopPropagation();
        hangoutYes = false;
        showToast("Okay ğŸ˜…");
        updateDynamicText();
      });
    }

    const satBtn = document.getElementById("satBtn");
    const sunBtn = document.getElementById("sunBtn");
    if(satBtn){
      satBtn.addEventListener("click", (e)=>{
        e.stopPropagation();
        day = "Saturday";
        if(dayPicked) dayPicked.textContent = "Picked: Saturday âœ¨";
        showToast("Saturday it is ğŸ’—");
        updateDynamicText();
      });
    }
    if(sunBtn){
      sunBtn.addEventListener("click", (e)=>{
        e.stopPropagation();
        day = "Sunday";
        if(dayPicked) dayPicked.textContent = "Picked: Sunday ğŸŒ¸";
        showToast("Sunday it is ğŸ’—");
        updateDynamicText();
      });
    }

    if(foodPills){
      foodPills.addEventListener("click", (e)=>{
        const pill = e.target.closest(".pill");
        if(!pill) return;
        e.stopPropagation();
        food = pill.dataset.food;
        foodPills.querySelectorAll(".pill").forEach(p=> p.classList.remove("selected"));
        pill.classList.add("selected");
        if(foodChoice) foodChoice.textContent = food;
        showToast("Yummy choice ğŸ˜Œ");
        updateDynamicText();
      });
    }

    // âœ… Tiny image compressor
    async function compressToDataUrl(file, opts){
      opts = opts || {};
      const maxW = opts.maxW || 1280;
      const maxH = opts.maxH || 1280;
      const quality = (opts.quality != null) ? opts.quality : 0.75;

      const img = await new Promise((resolve, reject)=>{
        const i = new Image();
        i.onload = ()=> resolve(i);
        i.onerror = reject;
        i.src = URL.createObjectURL(file);
      });

      let w = img.naturalWidth || img.width;
      let h = img.naturalHeight || img.height;

      const scale = Math.min(maxW / w, maxH / h, 1);
      w = Math.round(w * scale);
      h = Math.round(h * scale);

      const canvas = document.createElement("canvas");
      canvas.width = w;
      canvas.height = h;

      const ctx = canvas.getContext("2d");
      ctx.drawImage(img, 0, 0, w, h);

      return canvas.toDataURL("image/jpeg", quality);
    }

    const openCameraBtn = document.getElementById("openCameraBtn");
    const openGalleryBtn = document.getElementById("openGalleryBtn");

    if(openCameraBtn){
      openCameraBtn.addEventListener("click", (e)=>{
        e.stopPropagation();
        if(selfie) selfie.click();
      });
    }

    if(openGalleryBtn){
      openGalleryBtn.addEventListener("click", (e)=>{
        e.stopPropagation();
        if(!selfie) return;
        const old = selfie.getAttribute("capture");
        selfie.removeAttribute("capture");
        selfie.click();
        if(old) selfie.setAttribute("capture", old);
      });
    }

    if(selfie){
      selfie.addEventListener("change", async ()=>{
        const f = selfie.files && selfie.files[0];
        selfieFile = f || null;

        if(!f){
          selfieDataUrl = "";
          selfieName = "";
          if(preview) preview.textContent = "SELFIE PREVIEW âœ¨";
          showToast("No photo yet");
          updateDynamicText();
          return;
        }

        showToast("Compressingâ€¦ ğŸ’—");

        try{
          const dataUrl = await compressToDataUrl(f, { maxW: 1280, maxH: 1280, quality: 0.75 });
          selfieDataUrl = dataUrl;
          selfieName = "selfie_" + Date.now() + ".jpg";

          if(preview) preview.innerHTML = '<img alt="Selfie preview" src="' + dataUrl + '">';
          showToast("Selfie ready âœ…");
          updateDynamicText();
        } catch(err){
          selfieDataUrl = "";
          selfieName = "";
          showToast("Selfie failed ğŸ˜…");
        }
      });
    }

    const copySummary = document.getElementById("copySummary");
    if(copySummary){
      copySummary.addEventListener("click", async (e)=>{
        e.stopPropagation();
        const text = buildSummaryText();
        try{
          await navigator.clipboard.writeText(text);
          showToast("Copied ğŸ“‹");
        } catch {
          showToast("Copy failed (browser)");
        }
      });
    }

    // âœ… Save to Sheets + overlay
    const letsGoBtn = document.getElementById("letsGo");
    if(letsGoBtn){
      letsGoBtn.addEventListener("click", async function(e){
        e.stopPropagation();

        var payload = {
          answer: hangoutYes === true ? "Yes" : (hangoutYes === false ? "No" : ""),
          day: day || "",
          time: time || "",
          food: food || "",
          note: extraNote || "",
          from: FROM_NAME,
          selfieDataUrl: selfieDataUrl || "",
          selfieName: selfieName || ""
        };

        // Important: use text/plain to avoid CORS preflight headaches in many cases
      try{
  const res = await fetch(WEB_APP_URL, {
    method: "POST",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: JSON.stringify(payload)
  });

  const out = await res.json().catch(()=>null);
  console.log("Apps Script reply:", out);

  if(!out || !out.ok){
    showToast("Save failed ğŸ˜…");
    return;
  }

} catch(err){
  console.log("Fetch error:", err);
  showToast("Save blocked ğŸ˜…");
  return;
}

        var overlay = document.getElementById("finalOverlay");
        var line = document.getElementById("finalCuteLine");

        var when = "soon";
        if(day){
          when = day;
          if(time){
            when = when + " at " + time;
          }
        }
        if(line) line.textContent = "See you " + when + " ğŸ˜ŒğŸŒ¸";
        if(overlay) overlay.classList.add("show");
        showToast("Saved to Sheets ğŸ’—");
      });
    }

    const floaties = document.getElementById("floaties");
    const icons = ["ğŸ’—","â¤ï¸","ğŸ’•","ğŸ’","ğŸŒ¸","ğŸŒ·","â˜•","ğŸ¹","ğŸ¥‚","ğŸ›¶"];
    for(let i=0;i<26;i++){
      const s = document.createElement("span");
      s.textContent = icons[Math.floor(Math.random()*icons.length)];
      s.style.left = Math.random()*100 + "vw";
      s.style.animationDuration = (10 + Math.random()*14) + "s";
      s.style.animationDelay = (-Math.random()*16) + "s";
      floaties.appendChild(s);
    }

    pages.forEach(p => p.classList.remove("active", "exit-left"));
    pages[0].classList.add("active");
    current = 1;
    updateProgress();
    updateDynamicText();
  </script>
</body>
</html>